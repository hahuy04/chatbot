<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Hy Tit AI Chatbot</title>
    <style>
      *{margin:0;padding:0;box-sizing:border-box}
      body{
        font-family:Arial, sans-serif;
        background:linear-gradient(135deg,#0a0a0a,#1a0d2e,#16213e,#0f3460);
        min-height:100vh;position:relative;overflow-x:hidden
      }
      .neon-bg{position:fixed;inset:0;pointer-events:none;z-index:-1}
      .neon-circle{position:absolute;border-radius:50%;
        background:radial-gradient(circle,rgba(147,51,234,.3),transparent);
        animation:float 6s ease-in-out infinite}
      .neon-circle:nth-child(1){width:200px;height:200px;top:10%;left:80%}
      .neon-circle:nth-child(2){width:150px;height:150px;top:60%;left:10%;animation-delay:2s}
      .neon-circle:nth-child(3){width:300px;height:300px;top:40%;right:15%;animation-delay:4s}
      @keyframes float{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-20px) scale(1.1)}}
      .container{max-width:900px;margin:0 auto;padding:20px;min-height:100vh;display:flex;flex-direction:column}
      .header{
        text-align:center;margin-bottom:30px;background:rgba(255,255,255,.1);
        backdrop-filter:blur(10px);border:1px solid rgba(147,51,234,.3);border-radius:20px;padding:20px;
        box-shadow:0 8px 32px rgba(147,51,234,.2)}
      .header h1{
        background:linear-gradient(45deg,#9333ea,#c084fc,#a855f7);
        -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
        font-size:2.5rem;font-weight:700;margin-bottom:10px;text-shadow:0 0 20px rgba(147,51,234,.5)}
      .header p{color:rgba(255,255,255,.85);font-size:1.05rem}
      .chat-container{
        flex:1;background:rgba(255,255,255,.1);backdrop-filter:blur(10px);
        border:1px solid rgba(147,51,234,.3);border-radius:20px;padding:20px;display:flex;flex-direction:column;height:500px;
        box-shadow:0 8px 32px rgba(147,51,234,.2)}
      .chat-messages{flex:1;overflow-y:auto;padding:10px;margin-bottom:20px;border-radius:15px;background:rgba(0,0,0,.2)}
      .message{margin-bottom:15px;display:flex;align-items:flex-start;gap:10px}
      .message.user{flex-direction:row-reverse}
      .message-content{max-width:70%;padding:12px 18px;border-radius:20px;word-wrap:break-word;position:relative}
      .message.user .message-content{
        background:linear-gradient(135deg,#9333ea,#a855f7);color:#fff;border-bottom-right-radius:5px;
        box-shadow:0 4px 15px rgba(147,51,234,.3)}
      .message.bot .message-content{
        background:rgba(255,255,255,.1);backdrop-filter:blur(10px);
        border:1px solid rgba(147,51,234,.2);color:rgba(255,255,255,.9);
        border-bottom-left-radius:5px;box-shadow:0 4px 15px rgba(0,0,0,.2)}
      .message-avatar{width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px}
      .message.user .message-avatar{background:linear-gradient(135deg,#9333ea,#a855f7);color:#fff}
      .message.bot .message-avatar{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border:1px solid rgba(147,51,234,.3);color:#a855f7}
      .input-area{display:flex;gap:10px;align-items:center}
      .message-input{
        flex:1;background:rgba(0,0,0,.5);border:1px solid rgba(147,51,234,.5);border-radius:25px;
        padding:15px 20px;color:#fff;font-size:16px;transition:all .3s ease}
      .message-input:focus{outline:none;border-color:#a855f7;box-shadow:0 0 20px rgba(147,51,234,.4)}
      .send-button{
        background:linear-gradient(135deg,#9333ea,#a855f7);border:none;border-radius:50%;width:50px;height:50px;
        color:#fff;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;font-size:18px;
        box-shadow:0 4px 15px rgba(147,51,234,.3)}
      .send-button:hover{transform:scale(1.05);box-shadow:0 6px 20px rgba(147,51,234,.5)}
      .send-button:disabled{opacity:.6;cursor:not-allowed;transform:none}
      .loading{display:flex;gap:4px;padding:15px}
      .loading-dot{width:8px;height:8px;border-radius:50%;background:#a855f7;animation:loading 1.4s ease-in-out infinite both}
      .loading-dot:nth-child(1){animation-delay:-.32s}
      .loading-dot:nth-child(2){animation-delay:-.16s}
      @keyframes loading{0%,80%,100%{transform:scale(0)}40%{transform:scale(1)}}
      .chat-messages::-webkit-scrollbar{width:6px}
      .chat-messages::-webkit-scrollbar-track{background:rgba(0,0,0,.2);border-radius:10px}
      .chat-messages::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#9333ea,#a855f7);border-radius:10px}
      @media (max-width:768px){
        .container{padding:10px}
        .header h1{font-size:2rem}
        .chat-container{height:400px}
        .message-content{max-width:85%}
      }
    </style>
  </head>
  <body>
    <div class="neon-bg">
      <div class="neon-circle"></div>
      <div class="neon-circle"></div>
      <div class="neon-circle"></div>
    </div>

    <div class="container">
      <div class="header">
        <h1>ü§ñ Hy Tit AI Chatbot</h1>
        <p>Tr·∫£i nghi·ªám tr√≤ chuy·ªán v·ªõi AI th√¥ng minh trong giao di·ªán t∆∞∆°ng lai</p>
      </div>

      <div class="chat-container">
        <div class="chat-messages" id="chatMessages">
          <div class="message bot">
            <div class="message-avatar">ü§ñ</div>
            <div class="message-content">
              Xin ch√†o! T√¥i l√† Hy Tit AI Assistant c·ªßa b·∫°n. H√£y h·ªèi t√¥i b·∫•t c·ª© ƒëi·ªÅu g√¨ b·∫°n mu·ªën bi·∫øt! üíú
            </div>
          </div>
        </div>

        <div class="input-area">
          <input type="text" id="messageInput" class="message-input" placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n..." autofocus />
          <button id="sendButton" class="send-button" title="G·ª≠i">‚û§</button>
        </div>
      </div>
    </div>

    <script>
      const OPENROUTER_API_KEY = "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"; // <-- thay b·∫±ng key c·ªßa b·∫°n
      const SITE_URL = window.location.origin; 
 

      const chatMessages = document.getElementById("chatMessages");
      const messageInput  = document.getElementById("messageInput");
      const sendButton    = document.getElementById("sendButton");
      let isLoading = false;

      async function sendMessage() {
        const message = messageInput.value.trim();
        if (!message || isLoading) return;

        addMessage(message, "user");
        messageInput.value = "";

        isLoading = true;
        sendButton.disabled = true;
        const loadingEl = addLoadingMessage();

        try {
          const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
            method: "POST",
            headers: {
              "Authorization": `Bearer ${OPENROUTER_API_KEY}`,
              "HTTP-Referer": SITE_URL,           // ƒë·ªÉ OpenRouter x·∫øp h·∫°ng & ki·ªÉm tra origin
              "X-Title": "Hy Tit AI Chatbot",     // t√™n site hi·ªÉn th·ªã tr√™n openrouter.ai
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              model: "deepseek/deepseek-r1-0528-qwen3-8b:free",
              messages: [{ role: "user", content: message }]
            })
          });

          if (!response.ok) {
            const errText = await response.text();
            console.error("OpenRouter error:", response.status, errText);
            throw new Error(`OpenRouter ${response.status}: ${errText}`);
          }

          const data = await response.json();
          loadingEl.remove();

          const botMessage =
            data?.choices?.[0]?.message?.content ??
            "Xin l·ªói, t√¥i kh√¥ng th·ªÉ tr·∫£ l·ªùi c√¢u h·ªèi n√†y.";
          addMessage(botMessage, "bot");
        } catch (err) {
          console.error(err);
          loadingEl.remove();
          addMessage(
            "‚ö†Ô∏è L·ªói k·∫øt n·ªëi OpenRouter. Ki·ªÉm tra: (1) Allowed Sites ƒë√£ th√™m ƒë√∫ng origin, (2) kh√¥ng m·ªü file:// m√† ch·∫°y http://, (3) API key & quota/model.",
            "bot"
          );
        } finally {
          isLoading = false;
          sendButton.disabled = false;
          messageInput.focus();
        }
      }

      function addMessage(content, sender) {
        const messageDiv = document.createElement("div");
        messageDiv.className = `message ${sender}`;

        const avatar = document.createElement("div");
        avatar.className = "message-avatar";
        avatar.textContent = sender === "user" ? "üë§" : "ü§ñ";

        const messageContent = document.createElement("div");
        messageContent.className = "message-content";
        messageContent.textContent = content;

        messageDiv.appendChild(avatar);
        messageDiv.appendChild(messageContent);
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        return messageDiv;
      }

      function addLoadingMessage() {
        const messageDiv = document.createElement("div");
        messageDiv.className = "message bot";

        const avatar = document.createElement("div");
        avatar.className = "message-avatar";
        avatar.textContent = "ü§ñ";

        const loadingDiv = document.createElement("div");
        loadingDiv.className = "message-content";
        loadingDiv.innerHTML = `
          <div class="loading">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
        `;

        messageDiv.appendChild(avatar);
        messageDiv.appendChild(loadingDiv);
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        return messageDiv;
      }

      sendButton.addEventListener("click", sendMessage);
      messageInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });
      messageInput.focus();
    </script>
  </body>
</html>
